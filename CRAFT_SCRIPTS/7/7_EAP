@var {
    LPS1 = UTG-7 Light Panel Status
    LPF1 = UTG-7 Light Panel Floor
    ANT1 = UTG-7 Antenna
    OHG1 = UTG-7 O2/H2 Generator
    ODE1 = UTG-7 Ore Detector
    HEA1 = UTG-7 Headlight
    SPO1 = UTG-7 Spotlight
    AVF1 = UTG-7 Air Vent Fan
    EPI1 = UTG-7 Exhaust Pipe
    HEN1 = UTG-7 Hydrogen Engine
    HLG1 = UTG-7 Hinge Lift G1
    HLG2 = UTG-7 Hinge Lift G2
    PLF1 = UTG-7 Piston Lift Front
    PLB1 = UTG-7 Piston Lift Back
    MLO1 = UTG-7 Maglock Lift
    TST1 = UTG-7 Timer Standby
    TST2 = UTG-7 Timer Shutdown
    HGO1 = UTG-7 Hinge Door
    UTG-7 Event Controller Battery99
    UTG-7 Event Controller Battery20
}

@autostart{
    @offlinetostandby
    Delay 3000
    Velocity of HGO1 = 3
    @standbytoonline
}

@trailorconnect {
    if Status of UTG-7 Rotor Trailor Hitch = "Attached" {
        Delay 500
        Detach UTG-7 Rotor Trailor Hitch
        Color of UTG-7 Light Trailor Hitch = 0:255:0
        Write to UTG-7 LCD Info = "Trailor Detached"
    }
    else {
        Attach UTG-7 Rotor Trailor Hitch
        Color of UTG-7 Light Trailor Hitch = 255:0:0
        Write to UTG-7 LCD Info = "Trailor Attached"
    }
}

@runmode {
    * Note - this script switches between power cycles using Light Panel Status
    if Color of LPS1 = 255:0:0 {
        @offlinetostandby
    }
    else if Color of LPS1 = 255:255:0 {
        @standbytoonline
    }
    else if Color of LPS1 = 255:255:255 {
        @onlinetostandby
    }
    else if Color of LPS1 = 255:255:50 {
        @standbytooffline
    }
}

@offlinetostandby {
    * Craft currently offline going to standby
    Color of LPS1 = 255:255:0
    Write to UTG-7 LCD Info = "Standby"
    OnOff_On ANT1
    OnOff_On LPF1
    OnOff_On LPS1
    OnOff_On OHG1
    OnOff_Off ODE1
    OnOff_Off HEA1
    OnOff_Off SPO1
    Stop TST1
    Stop TST2
}

@standbytoonline {
    * Craft currently in standby going to online
    Color of LPS1 = 255:255:255
    Write to UTG-7 LCD Info = "Active"
    OnOff_On HEA1
    OnOff_On ODE1
    Stop TST1
    Stop TST2
}

@onlinetostandby {
    * Craft currently powered going to standby
    Color of LPS1 = 255:255:50
    Write to UTG-7 LCD Info = "Standby"
    OnOff_On ANT1
    OnOff_On LPF1
    OnOff_On LPS1
    OnOff_On OHG1
    OnOff_Off ODE1
    OnOff_Off HEA1
    OnOff_Off SPO1
}

@standbytooffline {
    * Craft currently in standby going to offline
    Color of LPS1 = 255:0:0
    Write to UTG-7 LCD Info = "Powered Down"
    OnOff_Off ANT1
    OnOff_Off LPF1
    OnOff_Off LPS1
    OnOff_Off HEA1
    OnOff_Off SPO1
    OnOff_Off OHG1
}

@engines_on {
    * Engines, exhausts and airvents go to online
    OnOff_On AVF1
    OnOff_On EPI1
    OnOff_On HEN1
    Write to UTG-7 LCD Info = "Batteries Require Charging"
    Delay 1000
    Write to UTG-7 LCD Info = "Engines On"
}

@engines_off {
    * Engines, exhausts and airvents go to offline
    OnOff_Off AVF1
    OnOff_Off EPI1
    OnOff_Off HEN1
    Write to UTG-7 LCD Info = "Batteries Charged"
    Delay 1000
    Write to UTG-7 LCD Info = "Engines Off"
}

